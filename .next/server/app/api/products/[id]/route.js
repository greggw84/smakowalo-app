(()=>{var e={};e.id=856,e.ids=[856],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},24144:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{DELETE:()=>d,GET:()=>c,PUT:()=>p});var o=t(96559),i=t(48088),a=t(37719),n=t(32190),u=t(56621);async function c(e,{params:r}){try{let e=(0,u.Sw)();if(!e)return n.NextResponse.json({error:"Database not configured"},{status:500});let{id:t}=await r,s=Number.parseInt(t);if(Number.isNaN(s))return n.NextResponse.json({error:"Invalid product ID"},{status:400});let{data:o,error:i}=await e.from("products").select(`
        *,
        categories (
          id,
          name,
          slug
        ),
        reviews (
          id,
          rating,
          title,
          comment,
          verified_purchase,
          created_at,
          profiles (
            first_name,
            last_name
          )
        )
      `).eq("id",s).eq("active",!0).single();if(i){if("PGRST116"===i.code)return n.NextResponse.json({error:"Product not found"},{status:404});return console.error("Error fetching product:",i),n.NextResponse.json({error:"Failed to fetch product"},{status:500})}return n.NextResponse.json({product:o,success:!0})}catch(e){return console.error("Product API error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e,{params:r}){try{let t=(0,u.Sw)();if(!t)return n.NextResponse.json({error:"Database not configured"},{status:500});let{id:s}=await r,o=Number.parseInt(s);if(Number.isNaN(o))return n.NextResponse.json({error:"Invalid product ID"},{status:400});let i=await e.json();i.name&&(i.slug=i.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim());let a={};i.name&&(a.name=i.name),i.slug&&(a.slug=i.slug),i.description&&(a.description=i.description),i.image&&(a.image=i.image),i.price&&(a.price=Number.parseFloat(i.price)),void 0!==i.old_price&&(a.old_price=i.old_price?Number.parseFloat(i.old_price):null),i.category_id&&(a.category_id=Number.parseInt(i.category_id)),i.cook_time&&(a.cook_time=Number.parseInt(i.cook_time)),i.servings&&(a.servings=Number.parseInt(i.servings)),i.difficulty&&(a.difficulty=i.difficulty),i.calories&&(a.calories=Number.parseInt(i.calories)),i.protein&&(a.protein=Number.parseFloat(i.protein)),i.carbs&&(a.carbs=Number.parseFloat(i.carbs)),i.fat&&(a.fat=Number.parseFloat(i.fat)),i.fiber&&(a.fiber=Number.parseFloat(i.fiber)),i.ingredients&&(a.ingredients=i.ingredients),i.allergens&&(a.allergens=i.allergens),void 0!==i.equipment&&(a.equipment=i.equipment),i.instructions&&(a.instructions=i.instructions),void 0!==i.nutrition_per_100g&&(a.nutrition_per_100g=i.nutrition_per_100g),i.tags&&(a.tags=i.tags),i.diets&&(a.diets=i.diets),void 0!==i.active&&(a.active=i.active),void 0!==i.featured&&(a.featured=i.featured),void 0!==i.stock_quantity&&(a.stock_quantity=Number.parseInt(i.stock_quantity)),void 0!==i.sku&&(a.sku=i.sku);let{data:c,error:p}=await t.from("products").update(a).eq("id",o).select().single();if(p)return console.error("Error updating product:",p),n.NextResponse.json({error:"Failed to update product"},{status:500});return n.NextResponse.json({product:c,success:!0,message:"Product updated successfully"})}catch(e){return console.error("Update product error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e,{params:r}){try{let e=(0,u.Sw)();if(!e)return n.NextResponse.json({error:"Database not configured"},{status:500});let{id:t}=await r,s=Number.parseInt(t);if(Number.isNaN(s))return n.NextResponse.json({error:"Invalid product ID"},{status:400});let{error:o}=await e.from("products").update({active:!1}).eq("id",s);if(o)return console.error("Error deleting product:",o),n.NextResponse.json({error:"Failed to delete product"},{status:500});return n.NextResponse.json({success:!0,message:"Product deleted successfully"})}catch(e){return console.error("Delete product error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"/home/project/smakowalo-app/src/app/api/products/[id]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:f,serverHooks:g}=l;function x(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:f})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=51906,e.exports=r},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56621:(e,r,t)=>{"use strict";t.d(r,{Sw:()=>a}),t(61223);var s=t(39398);let o="https://quqqpixujzxujauhessa.supabase.co",i="twoj-prawdziwy-anon-key-tutaj",a=()=>{if(!o.includes("placeholder")&&!i.includes("placeholder")&&!i.includes("twoj-prawdziwy")&&o.startsWith("https://")&&i.length>20)try{return(0,s.createClient)(o,i)}catch(e){return console.error("Supabase client creation failed:",e),null}return console.log("Supabase not configured properly, using mock data"),null};a()},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580,223],()=>t(24144));module.exports=s})();