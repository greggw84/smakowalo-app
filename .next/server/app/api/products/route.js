(()=>{var e={};e.id=146,e.ids=[146],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45777:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>k});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>p});var i=r(96559),a=r(48088),o=r(37719),n=r(32190),u=r(56621);let c=[{id:61,name:"Kurczak Tikka Masala z Curry z ryżem z kalafiora i kolendrą",slug:"kurczak-tikka-masala-curry-ryz-kalafior-kolendra",description:"Soczyste kawałki kurczaka w aromatycznym sosie tikka masala z ryżem z kalafiora i świeżą kolendrą",image:"https://ext.same-assets.com/3234956792/2143887936.png",price:35,old_price:null,category_id:1,cook_time:30,servings:2,difficulty:"Średni",calories:398,protein:19,carbs:12,fat:6,fiber:3,rating:4.8,reviews_count:24,ingredients:["Kurczak","Pasta tikka","Kalafior","Kolendra","Pomidory","Cebula czerwona","Śmietana kwaszona","Czosnek","Imbir"],allergens:[],equipment:["Patelnia","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie składnik\xf3w",description:"Pokr\xf3j kurczaka na kawałki i przygotuj wszystkie składniki."},{step:2,title:"Marinata",description:"Zamarynuj kurczaka w paście tikka na 15 minut."},{step:3,title:"Smażenie",description:"Usmaż kurczaka na patelni do złotego koloru."},{step:4,title:"Sos",description:"Dodaj sos pomidorowy i śmietanę, gotuj 10 minut."},{step:5,title:"Podawanie",description:"Podawaj z ryżem z kalafiora i kolendrą."}],nutrition_per_100g:{energy:"97.7 kcal",fat:"3.2 g",saturated_fat:"1.5 g",carbs:"6 g",sugar:"1.2 g",protein:"9.5 g",salt:"0.6 g"},tags:["Kurczak","Indyjskie","Keto"],diets:["keto","niskowęglowodanowa"],active:!0,featured:!0,stock_quantity:50,sku:"SMAKOWALO-61",created_at:"2024-06-21T10:00:00Z",updated_at:"2024-06-21T10:00:00Z",categories:{id:1,name:"Kurczak",slug:"kurczak"}},{id:58,name:"Krewetki z Harissą i Miodem z Ryżem z Kalafiora i Greckim Jogurtem",slug:"krewetki-harissa-miod-ryz-kalafior-jogurt-grecki",description:"Pikantne krewetki w sosie harissa z miodem, podawane z ryżem z kalafiora i chłodzącym greckim jogurtem",image:"https://ext.same-assets.com/3234956792/1990706172.png",price:35,old_price:null,category_id:2,cook_time:25,servings:2,difficulty:"Średni",calories:420,protein:25,carbs:16,fat:8,fiber:4,rating:4.7,reviews_count:18,ingredients:["Krewetki","Harissa","Mi\xf3d","Kalafior","Jogurt grecki","Czosnek","Oliwa z oliwek","Cytryna","Pietruszka"],allergens:["Skorupiaki"],equipment:["Patelnia","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie",description:"Oczyść krewetki i przygotuj kalafior."},{step:2,title:"Sos harissa",description:"Wymieszaj harissę z miodem i oliwą."},{step:3,title:"Smażenie krewetek",description:"Smaż krewetki w sosie harissa 3-4 minuty."},{step:4,title:"Ryż z kalafiora",description:"Przygotuj ryż z kalafiora na parze."},{step:5,title:"Podawanie",description:"Podawaj z jogurtem greckim i pietruszką."}],nutrition_per_100g:{energy:"105 kcal",fat:"4.2 g",saturated_fat:"1.1 g",carbs:"8 g",sugar:"6.2 g",protein:"12.5 g",salt:"0.8 g"},tags:["Krewetki","Morska","Keto"],diets:["keto","niskowęglowodanowa"],active:!0,featured:!0,stock_quantity:30,sku:"SMAKOWALO-58",created_at:"2024-06-21T10:00:00Z",updated_at:"2024-06-21T10:00:00Z",categories:{id:2,name:"Krewetki",slug:"krewetki"}},{id:70,name:"Świeży łosoś na ł\xf3żku cytrynowego risotto z dodatkiem tenderstem i groszku",slug:"swiezy-losos-cytrynowe-risotto-tenderstem-groszek",description:"Pieczony łosoś na kremowym cytrynowym risotto z tenderstem broccoli i świeżym groszkiem",image:"https://ext.same-assets.com/3234956792/2644930272.png",price:42,old_price:null,category_id:3,cook_time:35,servings:2,difficulty:"Trudny",calories:520,protein:30,carbs:24,fat:17,fiber:5,rating:4.9,reviews_count:31,ingredients:["Łosoś","Ryż risotto","Cytryna","Tenderstem broccoli","Groszek","Parmezan","Białe wino","Cebula","Czosnek"],allergens:["Ryby","Produkty mleczne"],equipment:["Patelnia","Rondelek","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie łososia",description:"Przypraw łososia i odstaw na 10 minut."},{step:2,title:"Risotto",description:"Przygotuj risotto dodając bulion po trochu."},{step:3,title:"Pieczenie łososia",description:"Piecz łososia na patelni 4-5 minut z każdej strony."},{step:4,title:"Warzywa",description:"Blanszuj tenderstem i groszek."},{step:5,title:"Finalizacja",description:"Dodaj cytrynę do risotto i podawaj z łososiem."}],nutrition_per_100g:{energy:"160 kcal",fat:"8.5 g",saturated_fat:"2.8 g",carbs:"12 g",sugar:"2.1 g",protein:"15.2 g",salt:"0.9 g"},tags:["Łosoś","Risotto","Zdrowa"],diets:["zdrowa"],active:!0,featured:!1,stock_quantity:25,sku:"SMAKOWALO-70",created_at:"2024-06-21T10:00:00Z",updated_at:"2024-06-21T10:00:00Z",categories:{id:3,name:"Ryby",slug:"ryby"}}];async function d(e){try{let t=(0,u.Sw)();if(!t||!(!"https://quqqpixujzxujauhessa.supabase.co".includes("placeholder")&&!"twoj-prawdziwy-anon-key-tutaj".includes("placeholder"))){console.log("Supabase not configured, returning mock data");let{searchParams:t}=new URL(e.url),r=t.get("category"),s=t.get("diet"),i=t.get("search"),a=t.get("featured"),o=[...c];return r&&(o=o.filter(e=>e.category_id===Number.parseInt(r))),s&&(o=o.filter(e=>e.diets.includes(s))),i&&(o=o.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()))),"true"===a&&(o=o.filter(e=>e.featured)),n.NextResponse.json({products:o,success:!0,message:"Mock data returned (Supabase not configured)"})}let{searchParams:r}=new URL(e.url),s=r.get("category"),i=r.get("diet"),a=r.get("search"),o=r.get("featured"),d=Number.parseInt(r.get("limit")||"50"),p=Number.parseInt(r.get("offset")||"0"),l=t.from("products").select(`
        *,
        categories (
          id,
          name,
          slug
        )
      `).eq("active",!0).range(p,p+d-1).order("created_at",{ascending:!1});s&&(l=l.eq("category_id",Number.parseInt(s))),i&&(l=l.contains("diets",[i])),a&&(l=l.or(`name.ilike.%${a}%,description.ilike.%${a}%`)),"true"===o&&(l=l.eq("featured",!0));let{data:g,error:k}=await l;if(k)return console.error("Error fetching products:",k),n.NextResponse.json({error:"Failed to fetch products"},{status:500});return n.NextResponse.json({products:g||[],success:!0})}catch(e){return console.error("Products API error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e){try{let t=(0,u.Sw)();if(!t)return n.NextResponse.json({error:"Database not configured"},{status:500});let r=await e.json();for(let e of["name","description","image","price","category_id","cook_time","servings","difficulty","calories","protein","carbs","fat","fiber","ingredients","allergens","instructions","tags","diets"])if(!r[e])return n.NextResponse.json({error:`Missing required field: ${e}`},{status:400});let s=r.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),i={name:r.name,slug:s,description:r.description,image:r.image,price:Number.parseFloat(r.price),old_price:r.old_price?Number.parseFloat(r.old_price):null,category_id:Number.parseInt(r.category_id),cook_time:Number.parseInt(r.cook_time),servings:Number.parseInt(r.servings),difficulty:r.difficulty,calories:Number.parseInt(r.calories),protein:Number.parseFloat(r.protein),carbs:Number.parseFloat(r.carbs),fat:Number.parseFloat(r.fat),fiber:Number.parseFloat(r.fiber),ingredients:r.ingredients,allergens:r.allergens,equipment:r.equipment||null,instructions:r.instructions,nutrition_per_100g:r.nutrition_per_100g||null,tags:r.tags,diets:r.diets,featured:r.featured||!1,stock_quantity:Number.parseInt(r.stock_quantity||"0"),sku:r.sku||null},{data:a,error:o}=await t.from("products").insert(i).select().single();if(o)return console.error("Error creating product:",o),n.NextResponse.json({error:"Failed to create product"},{status:500});return n.NextResponse.json({product:a,success:!0,message:"Product created successfully"},{status:201})}catch(e){return console.error("Create product error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/home/project/smakowalo-app/src/app/api/products/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:k,serverHooks:m}=l;function y(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:k})}},47990:()=>{},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56621:(e,t,r)=>{"use strict";r.d(t,{Sw:()=>o}),r(61223);var s=r(39398);let i="https://quqqpixujzxujauhessa.supabase.co",a="twoj-prawdziwy-anon-key-tutaj",o=()=>{if(!i.includes("placeholder")&&!a.includes("placeholder")&&!a.includes("twoj-prawdziwy")&&i.startsWith("https://")&&a.length>20)try{return(0,s.createClient)(i,a)}catch(e){return console.error("Supabase client creation failed:",e),null}return console.log("Supabase not configured properly, using mock data"),null};o()},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,223],()=>r(45777));module.exports=s})();