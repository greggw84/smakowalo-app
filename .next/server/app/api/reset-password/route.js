(()=>{var e={};e.id=319,e.ids=[319],e.modules={1191:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{POST:()=>p,PUT:()=>c});var o=s(96559),a=s(48088),n=s(37719),u=s(32190),i=s(56621);async function p(e){try{let r=(0,i.Sw)();if(!r)return u.NextResponse.json({error:"Database not configured"},{status:500});let{email:s}=await e.json();if(!s)return u.NextResponse.json({error:"Email is required"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return u.NextResponse.json({error:"Invalid email format"},{status:400});let{error:t}=await r.auth.resetPasswordForEmail(s,{redirectTo:"http://localhost:3000/reset-password"});return t&&console.error("Password reset error:",t),u.NextResponse.json({success:!0,message:"If an account with that email exists, we have sent you a password reset link."})}catch(e){return console.error("Reset password API error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let r=(0,i.Sw)();if(!r)return u.NextResponse.json({error:"Database not configured"},{status:500});let{password:s,access_token:t,refresh_token:o}=await e.json();if(!s)return u.NextResponse.json({error:"Password is required"},{status:400});if(!t||!o)return u.NextResponse.json({error:"Invalid reset tokens"},{status:400});if(s.length<8)return u.NextResponse.json({error:"Password must be at least 8 characters long"},{status:400});let{error:a}=await r.auth.setSession({access_token:t,refresh_token:o});if(a)return console.error("Session error:",a),u.NextResponse.json({error:"Invalid or expired reset link"},{status:400});let{error:n}=await r.auth.updateUser({password:s});if(n)return console.error("Password update error:",n),u.NextResponse.json({error:"Failed to update password"},{status:500});return u.NextResponse.json({success:!0,message:"Password updated successfully. You can now log in with your new password."})}catch(e){return console.error("Update password API error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/reset-password/route",pathname:"/api/reset-password",filename:"route",bundlePath:"app/api/reset-password/route"},resolvedPagePath:"/home/project/smakowalo-app/src/app/api/reset-password/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:w}=d;function h(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=51906,e.exports=r},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56621:(e,r,s)=>{"use strict";s.d(r,{Sw:()=>n}),s(61223);var t=s(39398);let o="https://quqqpixujzxujauhessa.supabase.co",a="twoj-prawdziwy-anon-key-tutaj",n=()=>{if(!o.includes("placeholder")&&!a.includes("placeholder")&&!a.includes("twoj-prawdziwy")&&o.startsWith("https://")&&a.length>20)try{return(0,t.createClient)(o,a)}catch(e){return console.error("Supabase client creation failed:",e),null}return console.log("Supabase not configured properly, using mock data"),null};n()},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,580,223],()=>s(1191));module.exports=t})();