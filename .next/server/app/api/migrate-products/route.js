(()=>{var e={};e.id=338,e.ids=[338],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},43451:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>k,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var i={};r.r(i),r.d(i,{POST:()=>p});var s=r(96559),a=r(48088),o=r(37719),n=r(32190),c=r(56621);let u=[{id:61,name:"Kurczak Tikka Masala z Curry z ryżem z kalafiora i kolendrą",description:"Soczyste kawałki kurczaka w aromatycznym sosie tikka masala z ryżem z kalafiora i świeżą kolendrą",image:"https://ext.same-assets.com/3234956792/2143887936.png",price:35,category:"Kurczak",cook_time:30,servings:2,difficulty:"Średni",calories:398,protein:19,carbs:12,fat:6,fiber:3,ingredients:["Kurczak","Pasta tikka","Kalafior","Kolendra","Pomidory","Cebula czerwona","Śmietana kwaszona","Czosnek","Imbir"],allergens:[],equipment:["Patelnia","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie składnik\xf3w",description:"Pokr\xf3j kurczaka na kawałki i przygotuj wszystkie składniki."},{step:2,title:"Marinata",description:"Zamarynuj kurczaka w paście tikka na 15 minut."},{step:3,title:"Smażenie",description:"Usmaż kurczaka na patelni do złotego koloru."},{step:4,title:"Sos",description:"Dodaj sos pomidorowy i śmietanę, gotuj 10 minut."},{step:5,title:"Podawanie",description:"Podawaj z ryżem z kalafiora i kolendrą."}],nutrition_per_100g:{energy:"97.7 kcal",fat:"3.2 g",saturated_fat:"1.5 g",carbs:"6 g",sugar:"1.2 g",protein:"9.5 g",salt:"0.6 g"},tags:["Kurczak","Indyjskie","Keto"],diets:["Keto","Niskowęglowodanowa"],featured:!0,stock_quantity:50},{id:58,name:"Krewetki z Harissą i Miodem z Ryżem z Kalafiora i Greckim Jogurtem",description:"Pikantne krewetki w sosie harissa z miodem, podawane z ryżem z kalafiora i chłodzącym greckim jogurtem",image:"https://ext.same-assets.com/3234956792/1990706172.png",price:35,category:"Krewetki",cook_time:25,servings:2,difficulty:"Średni",calories:420,protein:25,carbs:16,fat:8,fiber:4,ingredients:["Krewetki","Harissa","Mi\xf3d","Kalafior","Jogurt grecki","Czosnek","Oliwa z oliwek","Cytryna","Pietruszka"],allergens:["Skorupiaki"],equipment:["Patelnia","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie",description:"Oczyść krewetki i przygotuj kalafior."},{step:2,title:"Sos harissa",description:"Wymieszaj harissę z miodem i oliwą."},{step:3,title:"Smażenie krewetek",description:"Smaż krewetki w sosie harissa 3-4 minuty."},{step:4,title:"Ryż z kalafiora",description:"Przygotuj ryż z kalafiora na parze."},{step:5,title:"Podawanie",description:"Podawaj z jogurtem greckim i pietruszką."}],nutrition_per_100g:{energy:"105 kcal",fat:"4.2 g",saturated_fat:"1.1 g",carbs:"8 g",sugar:"6.2 g",protein:"12.5 g",salt:"0.8 g"},tags:["Krewetki","Morska","Keto"],diets:["Keto","Niskowęglowodanowa"],featured:!0,stock_quantity:30},{id:70,name:"Świeży łosoś na ł\xf3żku cytrynowego risotto z dodatkiem tenderstem i groszku",description:"Pieczony łosoś na kremowym cytrynowym risotto z tenderstem broccoli i świeżym groszkiem",image:"https://ext.same-assets.com/3234956792/2644930272.png",price:42,category:"Ryby",cook_time:35,servings:2,difficulty:"Trudny",calories:520,protein:30,carbs:24,fat:17,fiber:5,ingredients:["Łosoś","Ryż risotto","Cytryna","Tenderstem broccoli","Groszek","Parmezan","Białe wino","Cebula","Czosnek"],allergens:["Ryby","Produkty mleczne"],equipment:["Patelnia","Rondelek","N\xf3ż","Deska do krojenia"],instructions:[{step:1,title:"Przygotowanie łososia",description:"Przypraw łososia i odstaw na 10 minut."},{step:2,title:"Risotto",description:"Przygotuj risotto dodając bulion po trochu."},{step:3,title:"Pieczenie łososia",description:"Piecz łososia na patelni 4-5 minut z każdej strony."},{step:4,title:"Warzywa",description:"Blanszuj tenderstem i groszek."},{step:5,title:"Finalizacja",description:"Dodaj cytrynę do risotto i podawaj z łososiem."}],nutrition_per_100g:{energy:"160 kcal",fat:"8.5 g",saturated_fat:"2.8 g",carbs:"12 g",sugar:"2.1 g",protein:"15.2 g",salt:"0.9 g"},tags:["Łosoś","Risotto","Zdrowa"],diets:["Zdrowa"],featured:!1,stock_quantity:25}];async function p(e){try{let t=(0,c.Sw)();if(!t)return n.NextResponse.json({error:"Database not configured"},{status:500});let{adminKey:r}=await e.json();if("smakowalo-migration-2024"!==r)return n.NextResponse.json({error:"Unauthorized"},{status:401});let i={success:[],errors:[],total:u.length},{data:s}=await t.from("categories").select("id, name"),a=new Map;if(s)for(let e of s)a.set(e.name,e.id);for(let e of u)try{let r=a.get(e.category);if(!r){i.errors.push({product:e.name,error:`Category '${e.category}' not found`});continue}let s=e.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),{data:o}=await t.from("products").select("id").eq("slug",s).single();if(o){i.errors.push({product:e.name,error:"Product already exists"});continue}let n={name:e.name,slug:s,description:e.description,image:e.image,price:e.price,category_id:r,cook_time:e.cook_time,servings:e.servings,difficulty:e.difficulty,calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat,fiber:e.fiber,rating:4.5,reviews_count:0,ingredients:e.ingredients,allergens:e.allergens,equipment:e.equipment,instructions:e.instructions,nutrition_per_100g:e.nutrition_per_100g,tags:e.tags,diets:e.diets,featured:e.featured,stock_quantity:e.stock_quantity,sku:`SMAKOWALO-${e.id}`,active:!0},{data:c,error:u}=await t.from("products").insert(n).select().single();u?i.errors.push({product:e.name,error:u.message}):i.success.push({product:e.name,id:c.id})}catch(t){i.errors.push({product:e.name,error:t instanceof Error?t.message:"Unknown error"})}return n.NextResponse.json({success:!0,message:`Migration completed. ${i.success.length} products migrated successfully, ${i.errors.length} errors.`,results:i})}catch(e){return console.error("Migration error:",e),n.NextResponse.json({error:"Migration failed"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/migrate-products/route",pathname:"/api/migrate-products",filename:"route",bundlePath:"app/api/migrate-products/route"},resolvedPagePath:"/home/project/smakowalo-app/src/app/api/migrate-products/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:k}=d;function m(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56621:(e,t,r)=>{"use strict";r.d(t,{Sw:()=>o}),r(61223);var i=r(39398);let s="https://quqqpixujzxujauhessa.supabase.co",a="twoj-prawdziwy-anon-key-tutaj",o=()=>{if(!s.includes("placeholder")&&!a.includes("placeholder")&&!a.includes("twoj-prawdziwy")&&s.startsWith("https://")&&a.length>20)try{return(0,i.createClient)(s,a)}catch(e){return console.error("Supabase client creation failed:",e),null}return console.log("Supabase not configured properly, using mock data"),null};o()},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[447,580,223],()=>r(43451));module.exports=i})();