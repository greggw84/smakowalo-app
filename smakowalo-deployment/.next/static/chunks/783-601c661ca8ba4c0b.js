"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{283:(e,a,r)=>{r.d(a,{A:()=>n,O:()=>o});var s=r(280),t=r(2115),l=r(2099);let i=(0,t.createContext)(void 0);function o(e){let{children:a}=e,[r,o]=(0,t.useState)(null),[n,d]=(0,t.useState)(null),[c,m]=(0,t.useState)(!0),u=(0,l.RO)(),h=!"https://quqqpixujzxujauhessa.supabase.co".includes("placeholder");(0,t.useEffect)(()=>{if(!h||!u)return void m(!1);(async()=>{try{let{data:{session:a},error:r}=await u.auth.getSession();if(r)console.error("Error getting session:",r);else{var e;d(a),o(null!=(e=null==a?void 0:a.user)?e:null)}}catch(e){console.error("Supabase not available:",e)}m(!1)})();try{let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,a)=>{var r;d(a),o(null!=(r=null==a?void 0:a.user)?r:null),m(!1)});return()=>e.unsubscribe()}catch(e){console.error("Supabase auth subscription failed:",e)}},[u,h]);let p=async(e,a,r)=>{if(!h||!u)throw Error("Supabase is not configured");let{data:s,error:t}=await u.auth.signUp({email:e,password:a});if(t)throw t;if(s.user){let{error:a}=await u.from("profiles").insert({id:s.user.id,email:s.user.email||e,first_name:r.firstName,last_name:r.lastName,phone:r.phone,newsletter_subscribed:r.newsletter||!1});a&&console.error("Error creating profile:",a)}return{data:s,error:t}},w=async(e,a)=>{if(!h||!u)throw Error("Supabase is not configured");let{data:r,error:s}=await u.auth.signInWithPassword({email:e,password:a});if(s)throw s;return{data:r,error:s}},g=async()=>{if(!h||!u)throw Error("Supabase is not configured");let{error:e}=await u.auth.signOut();if(e)throw e};return(0,s.Y)(i.Provider,{value:{user:r,session:n,loading:c,signUp:p,signIn:w,signOut:g},children:a})}let n=()=>{let e=(0,t.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1783:(e,a,r)=>{r.d(a,{A:()=>v});var s=r(280),t=r(2115),l=r(285),i=r(6695),o=r(2523),n=r(5057),d=r(2346);let c=(0,r(157).A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);var m=r(9637),u=r(2543),h=r(6874),p=r.n(h),w=r(637),g=r(283),f=r(5695);function v(e){let{initialMode:a="login"}=e,[r,h]=(0,t.useState)(a),[v,b]=(0,t.useState)(!1),[y,N]=(0,t.useState)({email:"",password:"",rememberMe:!1}),[x,k]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",terms:!1,newsletter:!1}),[Y,z]=(0,t.useState)(!1),[F,j]=(0,t.useState)(""),[D,S]=(0,t.useState)(""),{signIn:C,signUp:P}=(0,g.A)(),E=(0,f.useRouter)(),Z=e=>{e!==r&&(b(!0),setTimeout(()=>{h(e),j(""),S(""),setTimeout(()=>{b(!1)},100)},250))},q=e=>{let{name:a,value:r,type:s,checked:t}=e.target;N(e=>({...e,[a]:"checkbox"===s?t:r}))},A=e=>{let{name:a,value:r,type:s,checked:t}=e.target;k(e=>({...e,[a]:"checkbox"===s?t:r}))},J=async e=>{e.preventDefault(),z(!0),j("");try{await C(y.email,y.password),E.push("/panel")}catch(e){j(e instanceof Error?e.message:"Wystąpił błąd podczas logowania")}finally{z(!1)}},R=async e=>{if(e.preventDefault(),z(!0),j(""),S(""),x.password!==x.confirmPassword){j("Hasła nie są zgodne"),z(!1);return}if(x.password.length<8){j("Hasło musi mieć minimum 8 znak\xf3w"),z(!1);return}if(!x.terms){j("Musisz zaakceptować regulamin"),z(!1);return}try{await P(x.email,x.password,{firstName:x.firstName,lastName:x.lastName,phone:x.phone,newsletter:x.newsletter}),S("Konto zostało utworzone! Sprawdź swoją skrzynkę email aby potwierdzić konto."),setTimeout(()=>{Z("login")},2e3)}catch(e){j(e instanceof Error?e.message:"Wystąpił błąd podczas rejestracji")}finally{z(!1)}};return(0,s.Y)("div",{className:"min-h-screen bg-gradient-to-b from-smakowalo-cream to-white flex items-center justify-center p-4",children:(0,s.Y)("div",{className:"w-full max-w-md",children:(0,s.Y)("div",{className:"relative overflow-hidden",children:(0,s.FD)(i.Zp,{className:"transition-all duration-500 ease-in-out transform ".concat(v?"translate-x-8 opacity-0 scale-95":"translate-x-0 opacity-100 scale-100"),children:[(0,s.FD)(i.aR,{className:"space-y-1",children:[(0,s.Y)("div",{className:"text-center mb-4",children:(0,s.Y)(p(),{href:"/",children:(0,s.Y)(w.A,{width:120,height:32})})}),(0,s.Y)(i.ZB,{className:"text-2xl text-center text-[var(--smakowalo-green-dark)]",children:"login"===r?"Zaloguj się":"Utw\xf3rz konto"}),(0,s.Y)(i.BT,{className:"text-center",children:"login"===r?"Zaloguj się do swojego konta, aby kontynuować":"Dołącz do tysięcy zadowolonych klient\xf3w"})]}),(0,s.FD)(i.Wu,{className:"space-y-4",children:[F&&(0,s.Y)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded",children:F}),D&&(0,s.Y)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded",children:D}),(0,s.FD)("div",{className:"space-y-3",children:[(0,s.FD)(l.$,{variant:"outline",className:"w-full border-blue-600 text-blue-600 hover:bg-blue-50",type:"button",disabled:Y,children:[(0,s.Y)(c,{className:"mr-2 h-4 w-4"}),"login"===r?"Zaloguj przez Facebook":"Zarejestruj się przez Facebook"]}),(0,s.FD)(l.$,{variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50",type:"button",disabled:Y,children:[(0,s.Y)(m.A,{className:"mr-2 h-4 w-4"}),"login"===r?"Zaloguj przez Google":"Zarejestruj się przez Google"]})]}),(0,s.FD)("div",{className:"relative",children:[(0,s.Y)("div",{className:"absolute inset-0 flex items-center",children:(0,s.Y)(d.w,{className:"w-full"})}),(0,s.Y)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.Y)("span",{className:"bg-white px-2 text-muted-foreground",children:"login"===r?"Lub zaloguj się emailem":"Lub zarejestruj się emailem"})})]}),"login"===r&&(0,s.FD)("form",{className:"space-y-4",onSubmit:J,children:[(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"email",children:"Email"}),(0,s.Y)(o.p,{id:"email",name:"email",type:"email",placeholder:"twoj.email@przykład.pl",className:"border-[var(--smakowalo-green-light)] focus:border-[var(--smakowalo-green-primary)]",value:y.email,onChange:q,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"password",children:"Hasło"}),(0,s.Y)(o.p,{id:"password",name:"password",type:"password",className:"border-[var(--smakowalo-green-light)] focus:border-[var(--smakowalo-green-primary)]",value:y.password,onChange:q,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"flex items-center justify-between",children:[(0,s.FD)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,s.Y)("input",{type:"checkbox",name:"rememberMe",className:"rounded border-[var(--smakowalo-green-light)]",checked:y.rememberMe,onChange:q,disabled:Y}),(0,s.Y)("span",{children:"Zapamiętaj mnie"})]}),(0,s.Y)(p(),{href:"/forgot-password",className:"text-sm text-[var(--smakowalo-green-primary)] hover:underline",children:"Zapomniałeś hasła?"})]}),(0,s.Y)(l.$,{type:"submit",className:"w-full bg-[var(--smakowalo-green-primary)] hover:bg-[var(--smakowalo-green-dark)] text-white",disabled:Y,children:Y?"Logowanie...":"Zaloguj się"})]}),"register"===r&&(0,s.FD)("form",{className:"space-y-4",onSubmit:R,children:[(0,s.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"firstName",children:"Imię"}),(0,s.Y)(o.p,{id:"firstName",name:"firstName",type:"text",placeholder:"Jan",value:x.firstName,onChange:A,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"lastName",children:"Nazwisko"}),(0,s.Y)(o.p,{id:"lastName",name:"lastName",type:"text",placeholder:"Kowalski",value:x.lastName,onChange:A,required:!0,disabled:Y})]})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"email",children:"Email"}),(0,s.Y)(o.p,{id:"email",name:"email",type:"email",placeholder:"twoj@email.com",value:x.email,onChange:A,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"phone",children:"Telefon"}),(0,s.Y)(o.p,{id:"phone",name:"phone",type:"tel",placeholder:"+48 123 456 789",value:x.phone,onChange:A,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"password",children:"Hasło"}),(0,s.Y)(o.p,{id:"password",name:"password",type:"password",placeholder:"Minimum 8 znak\xf3w",value:x.password,onChange:A,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"space-y-2",children:[(0,s.Y)(n.J,{htmlFor:"confirmPassword",children:"Potwierdź hasło"}),(0,s.Y)(o.p,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Powt\xf3rz hasło",value:x.confirmPassword,onChange:A,required:!0,disabled:Y})]}),(0,s.FD)("div",{className:"flex items-start space-x-2",children:[(0,s.Y)("input",{type:"checkbox",id:"terms",name:"terms",className:"rounded border-gray-300 mt-1",checked:x.terms,onChange:A,required:!0,disabled:Y}),(0,s.FD)(n.J,{htmlFor:"terms",className:"text-sm",children:["Akceptuję"," ",(0,s.Y)(p(),{href:"/regulamin",className:"text-[var(--smakowalo-green-primary)] hover:underline",children:"Regulamin"})," ","i"," ",(0,s.Y)(p(),{href:"/polityka-prywatnosci",className:"text-[var(--smakowalo-green-primary)] hover:underline",children:"Politykę Prywatności"})]})]}),(0,s.FD)("div",{className:"flex items-start space-x-2",children:[(0,s.Y)("input",{type:"checkbox",id:"newsletter",name:"newsletter",className:"rounded border-gray-300 mt-1",checked:x.newsletter,onChange:A,disabled:Y}),(0,s.Y)(n.J,{htmlFor:"newsletter",className:"text-sm",children:"Chcę otrzymywać newsletter z nowościami i ofertami specjalnymi"})]}),(0,s.Y)(l.$,{type:"submit",className:"w-full smakowalo-green",disabled:Y,children:Y?"Tworzenie konta...":"Utw\xf3rz konto"})]}),(0,s.FD)("div",{className:"text-center text-sm",children:[(0,s.FD)("span",{className:"text-gray-600",children:["login"===r?"Nie masz jeszcze konta?":"Masz już konto?"," "]}),(0,s.Y)("button",{type:"button",onClick:()=>Z("login"===r?"register":"login"),className:"text-[var(--smakowalo-green-primary)] hover:underline font-medium transition-colors",disabled:Y,children:"login"===r?"Zarejestruj się":"Zaloguj się"})]}),(0,s.Y)("div",{className:"text-center",children:(0,s.FD)(p(),{href:"/",className:"text-sm text-gray-600 hover:text-[var(--smakowalo-green-primary)] flex items-center justify-center transition-colors",children:[(0,s.Y)(u.A,{className:"h-4 w-4 mr-1"}),"Powr\xf3t do strony gł\xf3wnej"]})}),"login"===r&&(0,s.Y)("div",{className:"text-center text-xs text-muted-foreground",children:(0,s.FD)("p",{children:["Logując się, akceptujesz nasze"," ",(0,s.Y)(p(),{href:"/regulamin",className:"text-[var(--smakowalo-green-primary)] hover:underline",children:"Warunki użytkowania"})," ","i"," ",(0,s.Y)(p(),{href:"/polityka-prywatnosci",className:"text-[var(--smakowalo-green-primary)] hover:underline",children:"Politykę prywatności"}),"."]})})]})]})})})})}},2346:(e,a,r)=>{r.d(a,{w:()=>o});var s=r(280),t=r(2115),l=r(7489),i=r(9434);let o=t.forwardRef((e,a)=>{let{className:r,orientation:t="horizontal",decorative:o=!0,...n}=e;return(0,s.Y)(l.b,{ref:a,decorative:o,orientation:t,className:(0,i.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",r),...n})});o.displayName=l.b.displayName},5695:(e,a,r)=>{var s=r(8999);r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},7489:(e,a,r)=>{r.d(a,{b:()=>d});var s=r(2115),t=r(3655),l=r(5155),i="horizontal",o=["horizontal","vertical"],n=s.forwardRef((e,a)=>{var r;let{decorative:s,orientation:n=i,...d}=e,c=(r=n,o.includes(r))?n:i;return(0,l.jsx)(t.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});n.displayName="Separator";var d=n}}]);